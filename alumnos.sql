CREATE USER ALUMNOS IDENTIFIED BY ALUMNOS;
GRANT CONNECT, RESOURCE TO ALUMNOS;
CONNECT ALUMNOS/ALUMNOS;
DROP TABLE ALUMNOS CASCADE CONSTRAINTS;
DROP TABLE ASIGNATURAS CASCADE CONSTRAINTS;
DROP TABLE ALUMNOS_ASIGNATURAS CASCADE CONSTRAINTS;

CREATE TABLE ALUMNOS (ID_ALUMNO NUMBER(2),
APELLIDOS VARCHAR2(24) NOT NULL,
NOMBRE VARCHAR2(18) NOT NULL,
CURSO NUMBER(2),
TITULACION NUMBER(2),
CONSTRAINT PK_ALUMNOS PRIMARY KEY (ID_ALUMNO));

INSERT INTO ALUMNOS VALUES(1, 'PEREZ', 'ROSA', 1, 1);
INSERT INTO ALUMNOS VALUES(2, 'SANCHEZ', 'ANA', 1, 1);
INSERT INTO ALUMNOS VALUES(3, 'DIAZ', 'MANUEL', 1, 1);


CREATE TABLE ASIGNATURAS (ID_ASIGNATURA NUMBER(2),
TIPO VARCHAR2(2) NOT NULL,
NOMBRE VARCHAR2(60) NOT NULL,
CREDITOS NUMBER(3) NOT NULL,
CONSTRAINT PK_ASIGNATURA PRIMARY KEY (ID_ASIGNATURA));

INSERT INTO ASIGNATURAS VALUES (1, 'AA', 'BASES DE DATOS', 60);
INSERT INTO ASIGNATURAS VALUES (2, 'AA', 'DESARROLLO WEB', 30);
INSERT INTO ASIGNATURAS VALUES (3, 'AA', 'XML', 60);
INSERT INTO ASIGNATURAS VALUES (4, 'BB', 'JAVA', 60);

CREATE TABLE ALUMNOS_ASIGNATURAS(ID_ALUMNO NUMBER(2),
ID_ASIGNATURA NUMBER(2),
CURSADA VARCHAR(1),
CONSTRAINT PK_AL_ASIG PRIMARY KEY (ID_ALUMNO, ID_ASIGNATURA),
CONSTRAINT FK_AL_ASIG_ALUMNOS FOREIGN KEY (ID_ALUMNO) REFERENCES ALUMNOS,
CONSTRAINT FK_AL_ASIG_ASIGNATURAS FOREIGN KEY (ID_ASIGNATURA) REFERENCES ASIGNATURAS);


INSERT INTO ALUMNOS_ASIGNATURAS VALUES (1,1,'S');
INSERT INTO ALUMNOS_ASIGNATURAS VALUES (1,2,'S');
INSERT INTO ALUMNOS_ASIGNATURAS VALUES (2,1,'S');
INSERT INTO ALUMNOS_ASIGNATURAS VALUES (2,2,'S');
INSERT INTO ALUMNOS_ASIGNATURAS VALUES (2,3,'S');
INSERT INTO ALUMNOS_ASIGNATURAS VALUES (3,1,'S');

COMMIT;
